<!DOCTYPE html>
<html>
	<head>
		<title>Gabin's bar</title>
		<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
		<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
		<style>
				.container {
					background-color: #cccccc;
					overflow: auto;
					white-space: nowrap; 
					width: 100%;	  
				} 
				a {
					display: inline-block;
					text-decoration: none;
					text-align: center;
					padding: 12px;
					font-size: 20px;
				}
				a:hover{
					background-color: green;
				}	
		</style>
	</head>
	<body>
		<a href="25ans/index.html">Vers la page de mon anniversaire</a>
		<h1 style="text-align: center;">Gabin's bar</h1>

		<div class="container">
			<a href="#">Sirops</a>
			<a href="#">Softs</a>
			<a href="#">Bières</a>
			<a href="#">Vins</a>
			<a href="#">Classiques</a>
			<a href="#">Extravagants</a>
		</div>

		<div id="issuesList"></div>

		<script src="Scripts/hbvebvhezvkbzjvkzjv.js"></script>

		<script>		
			firebase.initializeApp(firebaseConfig);

			const db = firebase.firestore();

			// Récupérer une référence à la collection principale "boissons"
			const boissonsRef = db.collection("boissons");

			// Récupérer toutes les données de la collection principale "boissons"
			boissonsRef.get().then((querySnapshot) => {
				querySnapshot.forEach((doc) => {
					// doc.id contient l'identifiant de la sous-collection (par exemple, "biere", "sirop")
					console.log("Sous-collection :", doc.id);

					// Pour chaque sous-collection, récupérer une référence à la collection correspondante
					const subCollectionRef = boissonsRef.doc(doc.id).collection(doc.id);

					// Récupérer tous les documents de la sous-collection
					subCollectionRef.get().then((subCollectionSnapshot) => {
						subCollectionSnapshot.forEach((subDoc) => {
							// subDoc.id contient l'identifiant du document (par exemple, "1664", "Grim", "Fraise", "Orgeat")
							console.log("Document :", subDoc.id);
							// subDoc.data() contient les données du document
							console.log("Données :", subDoc.data());
						});

						// Ajouter un log pour vérifier si des documents ont été récupérés
						if (subCollectionSnapshot.empty) {
							console.log("Aucun document trouvé dans la sous-collection", doc.id);
						}
					}).catch((error) => {
						console.log("Erreur lors de la récupération des documents de la sous-collection", doc.id, ":", error);
					});
				});
			}).catch((error) => {
				console.log("Erreur lors de la lecture des données :", error);
			});
		</script>
		
		<!-- <script>
			firebase.initializeApp(firebaseConfig);

			const db = firebase.firestore();
			const issuesRef = firebase.database.collection('boissons');

			function readIssues() {
				issuesRef.on("value", function(snapshot) {
				  snapshot.forEach(snap => {
					const issue = snap.val();
			  
					document.getElementById("issuesList").innerHTML += `
					  <div class="card mb-3" id="${issue.id}" style="width: 25rem">
						<div class="card-body">
						  <h3 class="card-title">${issue.desc}</h3>
						  <h6>Issue ID: ${issue.id}</h6>
						  <p><span class="label label-info">Status: ${issue.status}</span></p>
						  <p><span class="glyphicon glyphicon-time">Priority Level: ${issue.priority}</span></p>
						  <p><span class="glyphicon glyphicon-user">Assigned to: ${issue.assignedTo}</span></p>
						  <button onclick="setStatusClosed('${issue.id}')" id="closeButton" class="btn btn-warning mx-3">Close</button>
						  <button onclick="deleteIssue('${issue.id}')" class="btn btn-danger mx-3">Delete</button>
						</div>
					  </div>
					`
				  })
				}
			  )}
		</script> -->

	</body>
</html>