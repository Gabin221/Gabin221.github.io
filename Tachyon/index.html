<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
<html lang="fr">
	<head>
		<title>Tachyon</title>
		<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
		<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
	</head>
	<body>
		<h1 style="text-align: center;">
			Tachyon
		</h1>

		<form id="programForm">
			<label for="nomProgramme">Nom du Programme:</label><br>
			<input type="text" id="nomProgramme" name="nomProgramme"><br>
			<label for="langage">Langage de Programmation :</label><br>
			<select id="langage" name="langage"></select><br>
			<label for="description">Description:</label><br>
			<textarea id="description" name="description"></textarea><br>
			<label for="codeProgramme">Code du Programme:</label><br>
			<textarea id="codeProgramme" name="codeProgramme"></textarea><br>
			<button type="submit">Enregistrer</button>
		</form>

		<div id="codesContainer"></div>

		<script src="../Scripts/hbvebvhezvkbzjvkzjv.js"></script>

		<script>
			firebase.initializeApp(firebaseConfig);
		
			const db = firebase.firestore();
		
			// Soumission du formulaire
			document.getElementById('programForm').addEventListener('submit', function(event) {
				event.preventDefault(); // Empêcher le formulaire de se soumettre normalement
		
				// Récupération des valeurs du formulaire
				const nomProgramme = document.getElementById('nomProgramme').value;
				const description = document.getElementById('description').value;
				const codeProgramme = document.getElementById('codeProgramme').value;
				const langage = document.getElementById('langage').value;
		
				// Envoi des données à Firebase
				db.collection('Codes').doc(langage).collection(langage).add({
					Nom: nomProgramme,
					Description: description,
					Code: codeProgramme
				}).then(function() {
					console.log("Données envoyées avec succès !");
					// Effacer le formulaire après l'envoi
					document.getElementById('programForm').reset();
				}).catch(function(error) {
					console.error("Erreur d'envoi des données:", error);
				});
			});
		</script>

		<script>
			// Récupération des langages de programmation depuis Firestore
			db.collection('Codes').get().then(querySnapshot => {
				const langageSelect = document.getElementById('langage');

				querySnapshot.forEach(doc => {
					// Pour chaque document dans la collection "Codes", créez une option dans la liste déroulante
					const option = document.createElement('option');
					option.value = doc.id; // Utilisez l'ID du document comme valeur de l'option
					option.textContent = doc.id; // Utilisez le nom du document comme texte de l'option
					langageSelect.appendChild(option);
				});
			}).catch(error => {
				console.error("Erreur lors de la récupération des langages de programmation :", error);
			});
		</script>

		<script>	
			// Référence à la collection des codes
			const codesCollection = db.collection('Codes');
	
			// Récupérer les données depuis Firestore
			codesCollection.get().then(querySnapshot => {
				const codesContainer = document.getElementById('codesContainer');
	
				querySnapshot.forEach(doc => {
					// Créer un élément div pour chaque code
					const codeDiv = document.createElement('div');
					codeDiv.classList.add('code');
	
					// Créer un élément h2 pour le nom du programme
					const nomProgrammeHeading = document.createElement('h2');
					nomProgrammeHeading.textContent = doc.id; // Utiliser le nom du document comme titre
					codeDiv.appendChild(nomProgrammeHeading);
	
					// Créer un élément pre pour le code du programme
					const codePre = document.createElement('pre');
					codePre.textContent = doc.data().codeProgramme; // Récupérer le contenu du code du programme
					codeDiv.appendChild(codePre);
	
					// Ajouter le codeDiv au conteneur des codes
					codesContainer.appendChild(codeDiv);
				});
			}).catch(error => {
				console.error("Erreur lors de la récupération des codes :", error);
			});
		</script>
	</body>
</html>
