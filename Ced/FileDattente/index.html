<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<html lang="fr">
	<head>
		<title>File d'attente</title>
		<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
		<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
		<style>
			li {
				border: 1px solid black;
				margin: 5px;
				padding: 5px;
			}
		</style>
	</head>
	<body>
		<h1 style="text-align: center;">File d'attente</h1>

		<button type="button">
			<a href="../index.html">
				Accueil
			</a>
		</button>

		<h3 style="text-align: center;">
			Liste des musiques en liste d'attente
		</h3>

		<ol id="musiquesListe">
		</ol>

		<script src="../../Scripts/hbvebvhezvkbzjvkzjv.js"></script>

		<script>
			// Récupération des musiques depuis Firestore
			db.collection('Musiques').get().then(querySnapshot => {
				const musiquesListe = document.getElementById('musiquesListe');

				querySnapshot.forEach(doc => {
					const data = doc.data();
					if (data.Remarque != "") {
						musiquesListe.innerHTML += `
							<li style="display: flex; justify-content: space-between;">
								<div>
									<div><span style="color: gray;">Titre</span>: ${data.Titre}</div>
									<br>
									<div><span style="color: gray;">Articte(s)</span>: ${data.Artistes}</div>
									<br>
									<div><span style="color: gray;">Remarque</span>: ${data.Remarque}</div>
								</div>
								<div style="display: flex; align-items: center; flex-direction: column; justify-content: center;">
									<a class='up' href='#' style="color: green;">up</a>
									<br>
									<a class='down' href='#' style="color: red;">down</a>
								</div>
							</li>
							`;
					} else {
						musiquesListe.innerHTML += `
							<li style="display: flex; justify-content: space-between;">
								<div>
									<div><span style="color: gray;">Titre</span>: ${data.Titre}</div>
									<br>
									<div><span style="color: gray;">Articte(s)</span>: ${data.Artistes}</div>
								</div>
								<div style="display: flex; align-items: center; flex-direction: column; justify-content: center;">
									<a class='up' href='#' style="color: green;">up</a>
									<br>
									<a class='down' href='#' style="color: red;">down</a>
								</div>
							</li>
							`;
					}
				});
				
				// Ajout des écouteurs d'événements pour les boutons "up" et "down"
				document.querySelectorAll('.up').forEach(button => {
					button.addEventListener('click', function (event) {
						event.preventDefault();
						const listItem = this.closest('li');
						if (listItem.previousElementSibling) {
							listItem.parentNode.insertBefore(listItem, listItem.previousElementSibling);
						}
					});
				});

				document.querySelectorAll('.down').forEach(button => {
					button.addEventListener('click', function (event) {
						event.preventDefault();
						const listItem = this.closest('li');
						if (listItem.nextElementSibling) {
							listItem.parentNode.insertBefore(listItem.nextElementSibling, listItem);
						}
					});
				});
			}).catch(error => {
				console.error("Erreur lors de la récupération des musiques:", error);
			});
		</script>
	</body>
</html>
